<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CS Tutor Platform SPA</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0; padding: 0;
    background: #f9f9f9;
  }
  header {
    background-color: #2c3e50;
    color: white;
    padding: 1rem;
    text-align: center;
  }
  main {
    padding: 1rem;
    max-width: 1200px;
    margin: 0 auto;
  }
  .hidden {
    display: none;
  }

  /* Topic & language selection */
  #topic-language select, #topic-language button {
    font-size: 1rem;
    padding: 0.5rem;
    margin-right: 1rem;
  }
  #problem-input textarea {
    width: 100%;
    height: 100px;
    font-size: 1rem;
    padding: 0.5rem;
    margin-top: 1rem;
  }
  #problem-input button {
    margin-top: 1rem;
    padding: 0.6rem 1.2rem;
    font-size: 1rem;
    cursor: pointer;
  }

  /* Loading screen */
  #loading {
    font-size: 1.5rem;
    text-align: center;
    margin-top: 3rem;
  }

  /* Tutor session layout */
  #tutor-session {
    display: flex;
    gap: 1rem;
    margin-top: 1rem;
  }
  /* Left panel: editors and whiteboard */
  #left-panel {
    flex: 3;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  /* Editors container */
  .editor-container {
    background: white;
    padding: 1rem;
    border: 1px solid #ddd;
    border-radius: 5px;
  }
  .editor-container h3 {
    margin-top: 0;
  }
  #text-editor, #code-editor {
    width: 100%;
    height: 150px;
    font-family: monospace, monospace;
    font-size: 1rem;
    padding: 0.5rem;
    border: 1px solid #ccc;
    border-radius: 4px;
    resize: vertical;
  }

  /* Whiteboard */
  #whiteboard {
    border: 1px solid #ccc;
    background: white;
    cursor: crosshair;
    border-radius: 4px;
    touch-action: none;
  }

  /* Right panel: video + chat */
  #right-panel {
    flex: 1.3;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  /* Video box */
  #video-box {
    background: black;
    height: 200px;
    border-radius: 8px;
    position: relative;
    overflow: hidden;
  }
  #video-box video, #video-box .video-placeholder {
    width: 100%;
    height: 100%;
    object-fit: cover;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #aaa;
    font-size: 1.2rem;
  }

  /* Chat box */
  #chat-box {
    flex: 1;
    display: flex;
    flex-direction: column;
    border: 1px solid #ccc;
    background: white;
    border-radius: 5px;
  }
  #chat-messages {
    flex: 1;
    padding: 0.5rem;
    overflow-y: auto;
    font-size: 0.9rem;
  }
  .chat-message {
    margin-bottom: 0.5rem;
  }
  .chat-message.student {
    color: #2c3e50;
  }
  .chat-message.tutor {
    color: #16a085;
  }

  #chat-input-area {
    display: flex;
    border-top: 1px solid #ccc;
  }
  #chat-input {
    flex: 1;
    padding: 0.5rem;
    border: none;
    font-size: 1rem;
    border-radius: 0 0 0 5px;
  }
  #chat-send-btn {
    background: #16a085;
    border: none;
    color: white;
    padding: 0 1rem;
    cursor: pointer;
    border-radius: 0 0 5px 0;
    font-weight: bold;
  }
  #chat-send-btn:disabled {
    background: #ccc;
    cursor: not-allowed;
  }
</style>
</head>
<body>
<header>
  <h1>CS Tutoring Platform</h1>
</header>
<main>
  <!-- Step 1: Topic & language selection -->
  <section id="topic-language">
    <h2>Select a CS topic and optionally a programming language</h2>
    <label for="topic-select">Topic: </label>
    <select id="topic-select">
      <option value="Data Structures">Data Structures</option>
      <option value="Intro To Theory Comp.">Intro To Theory Comp.</option>
      <option value="Discrete Structures">Discrete Structures</option>
      <option value="Algorithms">Algorithms</option>
      <option value="Operating Systems">Operating Systems</option>
      <option value="Databases">Databases</option>
      <option value="Computer Networks">Computer Networks</option>
    </select>
    <label for="lang-select">Programming Language: </label>
    <select id="lang-select">
      <option value="">-- None --</option>
      <option value="Python">Python</option>
      <option value="Java">Java</option>
      <option value="C++">C++</option>
      <option value="JavaScript">JavaScript</option>
      <option value="C#">C#</option>
      <option value="Go">Go</option>
      <option value="Ruby">Ruby</option>
    </select>
    <div id="problem-input">
      <h3>Describe your problem</h3>
      <textarea id="problem-text" placeholder="Type your problem here..."></textarea>
      <br/>
      <button id="submit-problem-btn">Find Tutor</button>
    </div>
  </section>

  <!-- Step 2: Loading screen -->
  <section id="loading" class="hidden">
    Linking you to a tutor...
  </section>

  <!-- Step 3: Tutor session -->
  <section id="tutor-session" class="hidden">
    <div id="left-panel">
      <div class="editor-container">
        <h3>Text Editor</h3>
        <textarea id="text-editor" placeholder="Type notes or explanations here..."></textarea>
      </div>
      <div class="editor-container">
        <h3>Code Editor</h3>
        <textarea id="code-editor" spellcheck="false" placeholder="Write your code here..."></textarea>
      </div>
      <div class="editor-container">
        <h3>Whiteboard</h3>
        <canvas id="whiteboard" width="600" height="300"></canvas>
        <button id="clear-whiteboard" style="margin-top: 0.5rem;">Clear Whiteboard</button>
      </div>
    </div>
    <div id="right-panel">
      <div id="video-box">
        <div class="video-placeholder" id="video-placeholder">
          <div>Student Video</div>
          <div style="font-size: 0.8rem; margin-top: 5px;">(Simulated)</div>
        </div>
      </div>
      <div id="chat-box">
        <div id="chat-messages"></div>
        <div id="chat-input-area">
          <input type="text" id="chat-input" placeholder="Type a message..." autocomplete="off" />
          <button id="chat-send-btn" disabled>Send</button>
        </div>
      </div>
    </div>
  </section>
</main>

<script>
  // DOM Elements
  const topicLangSection = document.getElementById('topic-language');
  const loadingSection = document.getElementById('loading');
  const tutorSessionSection = document.getElementById('tutor-session');
  const submitBtn = document.getElementById('submit-problem-btn');
  const problemText = document.getElementById('problem-text');
  const chatMessages = document.getElementById('chat-messages');
  const chatInput = document.getElementById('chat-input');
  const chatSendBtn = document.getElementById('chat-send-btn');
  const whiteboard = document.getElementById('whiteboard');
  const clearWhiteboardBtn = document.getElementById('clear-whiteboard');

  // Show loading and then tutor session
  submitBtn.addEventListener('click', () => {
    if (!problemText.value.trim()) {
      alert('Please enter your problem.');
      return;
    }
    // Hide topic/lang input
    topicLangSection.classList.add('hidden');
    // Show loading
    loadingSection.classList.remove('hidden');

    // Simulate tutor finding delay (3 seconds)
    setTimeout(() => {
      loadingSection.classList.add('hidden');
      tutorSessionSection.classList.remove('hidden');
      chatSendBtn.disabled = false;
      addChatMessage('tutor', 'Hello! I am your tutor. How can I help you today?');
    }, 3000);
  });

  // Chat functionality
  chatInput.addEventListener('input', () => {
    chatSendBtn.disabled = chatInput.value.trim() === '';
  });

  chatSendBtn.addEventListener('click', () => {
    const msg = chatInput.value.trim();
    if (!msg) return;
    addChatMessage('student', msg);
    chatInput.value = '';
    chatSendBtn.disabled = true;

    // Simulate tutor reply after 1.5 seconds
    setTimeout(() => {
      addChatMessage('tutor', generateTutorReply(msg));
    }, 1500);
  });

  function addChatMessage(sender, text) {
    const msgDiv = document.createElement('div');
    msgDiv.classList.add('chat-message', sender);
    msgDiv.textContent = (sender === 'student' ? 'You: ' : 'Tutor: ') + text;
    chatMessages.appendChild(msgDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  // Very basic tutor reply generator
  function generateTutorReply(studentMsg) {
    const lower = studentMsg.toLowerCase();
    if (lower.includes('help') || lower.includes('error')) {
      return "Can you please provide more details or share your code?";
    }
    if (lower.includes('thanks') || lower.includes('thank you')) {
      return "You're welcome! Let me know if you need anything else.";
    }
    return "Interesting, let's work through that together.";
  }

  // Whiteboard drawing setup
  const ctx = whiteboard.getContext('2d');
  ctx.strokeStyle = '#333';
  ctx.lineWidth = 2;
  ctx.lineCap = 'round';

  let drawing = false;
  let lastX = 0;
  let lastY = 0;

  function startDrawing(e) {
    drawing = true;
    const {x, y} = getXY(e);
    lastX = x;
    lastY = y;
  }

  function draw(e) {
    if (!drawing) return;
    e.preventDefault();
    const {x, y} = getXY(e);
    ctx.beginPath();
    ctx.moveTo(lastX, lastY);
    ctx.lineTo(x, y);
    ctx.stroke();
    lastX = x;
    lastY = y;
  }

  function stopDrawing() {
    drawing = false;
  }

  function getXY(e) {
    const rect = whiteboard.getBoundingClientRect();
    let clientX, clientY;
    if (e.touches) {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    return {
      x: clientX - rect.left,
      y: clientY - rect.top
    };
  }

  whiteboard.addEventListener('mousedown', startDrawing);
  whiteboard.addEventListener('mousemove', draw);
  whiteboard.addEventListener('mouseup', stopDrawing);
  whiteboard.addEventListener('mouseout', stopDrawing);

  whiteboard.addEventListener('touchstart', startDrawing);
  whiteboard.addEventListener('touchmove', draw);
  whiteboard.addEventListener('touchend', stopDrawing);
  whiteboard.addEventListener('touchcancel', stopDrawing);

  clearWhiteboardBtn.addEventListener('click', () => {
    ctx.clearRect(0, 0, whiteboard.width, whiteboard.height);
  });
</script>
</body>
</html>





